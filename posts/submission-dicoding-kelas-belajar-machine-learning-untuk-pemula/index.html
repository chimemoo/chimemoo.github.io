<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <title>Submission Dicoding kelas Belajar Machine Learning untuk Pemula - Chimemoo</title>
    
    <meta name="description" content="Pendahuluan Halo semuanya, setelah saya berusaha untuk menyelesaikan kelas belajar machine learning pemula sambil melakukan kesibukan lain seperti bekerja dan hal lainnya. Akhirnya saya menyelesaikan submission. Submission yang ada pada kelas ini adalah mencoba menggunakan dataset gambar rock sccisors paper dimana kita harus melakukan klasifikasi dengan ketentuan yang telah diberikan. Dimana minimal akurasi yang harus didapatkan agar lulus kelas ini adalah 85%. Temen-temen yang mungkin mengambil kelas tersebut bisa mempelajari kode dibawah untuk menyelesaikannya.">
    <meta name="author" content="chimemoo">
    
    <link href="https://chimemoo.github.io/an-old-hope.min.css" rel="stylesheet">
    <link href="https://chimemoo.github.io/style.css" rel="stylesheet">
    <link href="https://chimemoo.github.io/custom.css" rel="stylesheet">
    
    <link rel="apple-touch-icon" href="https://chimemoo.github.io/apple-touch-icon.png">
    <link rel="icon" href="https://chimemoo.github.io/favicon.ico">
    <meta name="generator" content="Hugo 0.72.0" />
    
    
    
    <script>
      function setTheme() {
        const time = new Date();

        const prev = localStorage.getItem('date');
        const date = String(time.getMonth() + 1) + '.' + String(time.getDate());

        const now = time.getTime();
        let sunrise;
        let sunset;

        function setBodyClass() {
          if (now > sunrise && now < sunset) return;
          document.body.classList.add('dark');
        }

        if (date !== prev) {
          fetch('https://api.ipgeolocation.io/astronomy?apiKey=5ed37d85103e4defa5df4c5298ed5215')
            .then(res => res.json())
            .then(data => {
              sunrise = data.sunrise.split(':').map(Number);
              sunset = data.sunset.split(':').map(Number);
            })
            .catch(() => {
              sunrise = [7, 0];
              sunset = [19, 0];
            })
            .finally(() => {
              sunrise = time.setHours(sunrise[0], sunrise[1], 0);
              sunset = time.setHours(sunset[0], sunset[1], 0);
              setBodyClass();
              localStorage.setItem('sunrise', sunrise);
              localStorage.setItem('sunset', sunset);
            });
          localStorage.setItem('date', date);
        } else {
          sunrise = Number(localStorage.getItem('sunrise'));
          sunset = Number(localStorage.getItem('sunset'));
          setBodyClass();
        }
      }
    </script>
  </head>
  <body class="single">
    <script>
      setTheme();
    </script>
    <header class="header">
      <nav class="nav">
        <p class="logo"><a href="https://chimemoo.github.io/">Chimemoo</a></p>
        <ul class="menu">
          <li>
            <a href="http://linkedin.com/in/christmemory">My Linkedin</a>
          </li>
          <li>
            <a href="/posts/">Post</a>
          </li>
          <li>
            <a href="/post/about/">About</a>
          </li>
        </ul>
      </nav>
    </header>
    <main class="main">


<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Submission Dicoding kelas Belajar Machine Learning untuk Pemula</h1>
    <div class="post-meta">chimemoo · June 20, 2020</div>
  </header>
  <div class="post-content"><h2 id="pendahuluan">Pendahuluan</h2>
<p>Halo semuanya, setelah saya berusaha untuk menyelesaikan kelas belajar machine learning pemula sambil melakukan kesibukan lain seperti bekerja dan hal lainnya. Akhirnya saya menyelesaikan submission. Submission yang ada pada kelas ini adalah mencoba menggunakan dataset gambar rock sccisors paper dimana kita harus melakukan klasifikasi dengan ketentuan yang telah diberikan. Dimana minimal akurasi yang harus didapatkan agar lulus kelas ini adalah 85%. Temen-temen yang mungkin mengambil kelas tersebut bisa mempelajari kode dibawah untuk menyelesaikannya.</p>
<p>Kode ini saya tulis di colabs.research.google.com, kode yang ada dibawah adalah hasil konversi ke markdown.</p>
<h2 id="kode">Kode</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Install for spliting folder</span>
<span style="color:#960050;background-color:#1e0010">!</span>pip install split<span style="color:#f92672">-</span>folders
<span style="color:#960050;background-color:#1e0010">!</span>pip install split<span style="color:#f92672">-</span>folders tqdm
</code></pre></div><pre><code>Requirement already satisfied: split-folders in /usr/local/lib/python3.6/dist-packages (0.3.1)
Requirement already satisfied: split-folders in /usr/local/lib/python3.6/dist-packages (0.3.1)
Requirement already satisfied: tqdm in /usr/local/lib/python3.6/dist-packages (4.41.1)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Importing all need</span>
<span style="color:#f92672">import</span> urllib.request
<span style="color:#f92672">import</span> zipfile<span style="color:#f92672">,</span> os
<span style="color:#f92672">import</span> split_folders
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> glob
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
<span style="color:#f92672">import</span> tensorflow <span style="color:#f92672">as</span> tf
<span style="color:#f92672">from</span> google.colab <span style="color:#f92672">import</span> files
<span style="color:#f92672">from</span> keras.preprocessing <span style="color:#f92672">import</span> image
<span style="color:#f92672">from</span> tensorflow.keras.layers <span style="color:#f92672">import</span> Conv2D, MaxPooling2D, Dense, Flatten
<span style="color:#f92672">from</span> tensorflow.keras.models <span style="color:#f92672">import</span> Sequential
<span style="color:#f92672">from</span> tensorflow.keras.preprocessing.image <span style="color:#f92672">import</span> ImageDataGenerator
</code></pre></div><pre><code>Using TensorFlow backend.
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>urlretrieve(<span style="color:#e6db74">&#39;https://dicodingacademy.blob.core.windows.net/picodiploma/ml_pemula_academy/rockpaperscissors.zip&#39;</span>, <span style="color:#e6db74">&#39;rockpaperscissors.zip&#39;</span>)
</code></pre></div><pre><code>('rockpaperscissors.zip', &lt;http.client.HTTPMessage at 0x7f85eb24f048&gt;)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Read &amp; extract the file dataset</span>
local_zip <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;rockpaperscissors.zip&#39;</span>
zip_ref <span style="color:#f92672">=</span> zipfile<span style="color:#f92672">.</span>ZipFile(local_zip, <span style="color:#e6db74">&#39;r&#39;</span>)
zip_ref<span style="color:#f92672">.</span>extractall(<span style="color:#e6db74">&#39;/content/&#39;</span>)
zip_ref<span style="color:#f92672">.</span>close()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Split dataset data train and val</span>
split_folders<span style="color:#f92672">.</span>ratio(<span style="color:#e6db74">&#39;/content/rockpaperscissors/rps-cv-images&#39;</span>, output<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/content/rockpaperscissors/output_result&#34;</span>, ratio<span style="color:#f92672">=</span>(<span style="color:#f92672">.</span><span style="color:#ae81ff">8</span>, <span style="color:#f92672">.</span><span style="color:#ae81ff">2</span>))
</code></pre></div><pre><code>Copying files: 2188 files [00:01, 1107.79 files/s]
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># define folder location</span>
base_dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/content/rockpaperscissors/output_result&#39;</span>
train_dir <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(base_dir, <span style="color:#e6db74">&#39;train&#39;</span>)
validation_dir <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(base_dir, <span style="color:#e6db74">&#39;val&#39;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># show folder val list</span>
os<span style="color:#f92672">.</span>listdir(<span style="color:#e6db74">&#39;/content/rockpaperscissors/output_result/val&#39;</span>)
</code></pre></div><pre><code>['scissors', 'rock', 'paper']
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># definition function for read list name of file</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">read_list</span>(directory):
  list_label <span style="color:#f92672">=</span> []
  list_file <span style="color:#f92672">=</span> []
  <span style="color:#66d9ef">for</span> label <span style="color:#f92672">in</span> os<span style="color:#f92672">.</span>listdir(directory):
    <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> os<span style="color:#f92672">.</span>listdir(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(directory, label)):
      list_label<span style="color:#f92672">.</span>append(label)
      list_file<span style="color:#f92672">.</span>append(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(directory, label, item))
  <span style="color:#66d9ef">return</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;labels&#39;</span>: list_label, <span style="color:#e6db74">&#39;filepath&#39;</span>:list_file})
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">train_df <span style="color:#f92672">=</span> read_list(train_dir)
validation_df <span style="color:#f92672">=</span> read_list(validation_dir)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pd<span style="color:#f92672">.</span>set_option(<span style="color:#e6db74">&#39;display.max_colwidth&#39;</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
train_df
</code></pre></div><pre><code>/usr/local/lib/python3.6/dist-packages/ipykernel_launcher.py:1: FutureWarning: Passing a negative integer is deprecated in version 1.0 and will not be supported in future version. Instead, use None to not limit the column width.
  &quot;&quot;&quot;Entry point for launching an IPython kernel.
</code></pre>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>labels</th>
      <th>filepath</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>scissors</td>
      <td>/content/rockpaperscissors/output_result/train/scissors/1L1n6plr7jlZGirw.png</td>
    </tr>
    <tr>
      <th>1</th>
      <td>scissors</td>
      <td>/content/rockpaperscissors/output_result/train/scissors/2l1K148aIJHRR1q7.png</td>
    </tr>
    <tr>
      <th>2</th>
      <td>scissors</td>
      <td>/content/rockpaperscissors/output_result/train/scissors/ksWe2SZsjOoLAzf5.png</td>
    </tr>
    <tr>
      <th>3</th>
      <td>scissors</td>
      <td>/content/rockpaperscissors/output_result/train/scissors/DH7iguASbWIzzBnT.png</td>
    </tr>
    <tr>
      <th>4</th>
      <td>scissors</td>
      <td>/content/rockpaperscissors/output_result/train/scissors/Kzghoy329glIgfcC.png</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1744</th>
      <td>paper</td>
      <td>/content/rockpaperscissors/output_result/train/paper/em91htnBohvtnG2e.png</td>
    </tr>
    <tr>
      <th>1745</th>
      <td>paper</td>
      <td>/content/rockpaperscissors/output_result/train/paper/QKFJL22hutlivVGa.png</td>
    </tr>
    <tr>
      <th>1746</th>
      <td>paper</td>
      <td>/content/rockpaperscissors/output_result/train/paper/Gc4hUsoFAQBdulGg.png</td>
    </tr>
    <tr>
      <th>1747</th>
      <td>paper</td>
      <td>/content/rockpaperscissors/output_result/train/paper/hUDN2qXDxjoGBWqu.png</td>
    </tr>
    <tr>
      <th>1748</th>
      <td>paper</td>
      <td>/content/rockpaperscissors/output_result/train/paper/AMewmfMVCnLfbuNr.png</td>
    </tr>
  </tbody>
</table>
<p>1749 rows × 2 columns</p>
</div>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># setup image data generator</span>
data_train_img_gen <span style="color:#f92672">=</span> ImageDataGenerator(
    rotation_range<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>,
    rescale<span style="color:#f92672">=</span><span style="color:#ae81ff">1.</span><span style="color:#f92672">/</span><span style="color:#ae81ff">255</span>,
    shear_range<span style="color:#f92672">=</span><span style="color:#ae81ff">0.2</span>,
    zoom_range<span style="color:#f92672">=</span><span style="color:#ae81ff">0.2</span>,
    horizontal_flip<span style="color:#f92672">=</span>True,
    fill_mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;nearest&#39;</span>
  )

data_val_img_gen <span style="color:#f92672">=</span> ImageDataGenerator(
    rotation_range<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>,
    rescale<span style="color:#f92672">=</span><span style="color:#ae81ff">1.</span><span style="color:#f92672">/</span><span style="color:#ae81ff">255</span>,
    shear_range<span style="color:#f92672">=</span><span style="color:#ae81ff">0.2</span>,
    zoom_range<span style="color:#f92672">=</span><span style="color:#ae81ff">0.2</span>,
    horizontal_flip<span style="color:#f92672">=</span>True,
    fill_mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;nearest&#39;</span>
  )
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Make train generator</span>
train_generator <span style="color:#f92672">=</span> data_train_img_gen<span style="color:#f92672">.</span>flow_from_dataframe(
    train_df,
    class_mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;categorical&#39;</span>,
    x_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;filepath&#39;</span>,
    y_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;labels&#39;</span>,
    target_size<span style="color:#f92672">=</span>(<span style="color:#ae81ff">150</span>,<span style="color:#ae81ff">150</span>),
    batch_size<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>
)

val_generator <span style="color:#f92672">=</span> data_val_img_gen<span style="color:#f92672">.</span>flow_from_dataframe(
    validation_df,
    class_mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;categorical&#39;</span>,
    x_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;filepath&#39;</span>,
    y_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;labels&#39;</span>,
    target_size<span style="color:#f92672">=</span>(<span style="color:#ae81ff">150</span>,<span style="color:#ae81ff">150</span>),
    batch_size<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>
)
</code></pre></div><pre><code>Found 1749 validated image filenames belonging to 3 classes.
Found 439 validated image filenames belonging to 3 classes.
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Create model and do training</span>
model <span style="color:#f92672">=</span> Sequential()

model<span style="color:#f92672">.</span>add(Conv2D(<span style="color:#ae81ff">32</span>, (<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">3</span>), activation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;relu&#39;</span>, input_shape<span style="color:#f92672">=</span>(<span style="color:#ae81ff">150</span>, <span style="color:#ae81ff">150</span>, <span style="color:#ae81ff">3</span>)))
model<span style="color:#f92672">.</span>add(MaxPooling2D(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>))
Conv2D(<span style="color:#ae81ff">64</span>, (<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">3</span>), activation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;relu&#39;</span>),
model<span style="color:#f92672">.</span>add(MaxPooling2D(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>))
model<span style="color:#f92672">.</span>add(Conv2D(<span style="color:#ae81ff">64</span>, (<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">3</span>), activation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;relu&#39;</span>))
model<span style="color:#f92672">.</span>add(MaxPooling2D(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>))
model<span style="color:#f92672">.</span>add(Conv2D(<span style="color:#ae81ff">64</span>, (<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">3</span>), activation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;relu&#39;</span>))
model<span style="color:#f92672">.</span>add(MaxPooling2D(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>))
model<span style="color:#f92672">.</span>add(Flatten())
model<span style="color:#f92672">.</span>add(Dense(<span style="color:#ae81ff">128</span>, activation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;relu&#39;</span>))
model<span style="color:#f92672">.</span>add(Dense(<span style="color:#ae81ff">3</span>, activation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;softmax&#39;</span>))

model<span style="color:#f92672">.</span>compile(
    loss<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;categorical_crossentropy&#39;</span>,
    optimizer<span style="color:#f92672">=</span>tf<span style="color:#f92672">.</span>optimizers<span style="color:#f92672">.</span>Adam(),
    metrics<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;accuracy&#39;</span>]
)

model<span style="color:#f92672">.</span>fit(
    train_generator,
    steps_per_epoch<span style="color:#f92672">=</span><span style="color:#ae81ff">25</span>,
    epochs<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>,
    validation_data<span style="color:#f92672">=</span>val_generator,
    validation_steps<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>,
    verbose<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>
)
</code></pre></div><pre><code>Epoch 1/20
25/25 - 3s - loss: 1.1445 - accuracy: 0.3700 - val_loss: 1.1281 - val_accuracy: 0.2000
Epoch 2/20
25/25 - 3s - loss: 1.1044 - accuracy: 0.3000 - val_loss: 1.1003 - val_accuracy: 0.2500
Epoch 3/20
25/25 - 3s - loss: 1.0883 - accuracy: 0.3900 - val_loss: 1.0841 - val_accuracy: 0.3000
Epoch 4/20
25/25 - 3s - loss: 1.1039 - accuracy: 0.3700 - val_loss: 1.0939 - val_accuracy: 0.4000
Epoch 5/20
25/25 - 3s - loss: 1.0356 - accuracy: 0.5000 - val_loss: 1.0847 - val_accuracy: 0.3500
Epoch 6/20
25/25 - 3s - loss: 1.0018 - accuracy: 0.4700 - val_loss: 0.8752 - val_accuracy: 0.7500
Epoch 7/20
25/25 - 3s - loss: 0.8081 - accuracy: 0.6600 - val_loss: 0.8446 - val_accuracy: 0.5500
Epoch 8/20
25/25 - 3s - loss: 0.5471 - accuracy: 0.8000 - val_loss: 0.3771 - val_accuracy: 0.8500
Epoch 9/20
25/25 - 3s - loss: 0.7126 - accuracy: 0.7300 - val_loss: 0.8818 - val_accuracy: 0.7000
Epoch 10/20
25/25 - 3s - loss: 0.5534 - accuracy: 0.8300 - val_loss: 0.3515 - val_accuracy: 0.9000
Epoch 11/20
25/25 - 3s - loss: 0.4881 - accuracy: 0.8300 - val_loss: 0.5941 - val_accuracy: 0.8500
Epoch 12/20
25/25 - 3s - loss: 0.4568 - accuracy: 0.8600 - val_loss: 0.5413 - val_accuracy: 0.8500
Epoch 13/20
25/25 - 3s - loss: 0.2625 - accuracy: 0.9200 - val_loss: 0.3694 - val_accuracy: 0.9000
Epoch 14/20
25/25 - 3s - loss: 0.4571 - accuracy: 0.8400 - val_loss: 0.7890 - val_accuracy: 0.7000
Epoch 15/20
25/25 - 3s - loss: 0.2869 - accuracy: 0.8900 - val_loss: 0.3632 - val_accuracy: 0.8500
Epoch 16/20
25/25 - 3s - loss: 0.4002 - accuracy: 0.8400 - val_loss: 0.4019 - val_accuracy: 0.9500
Epoch 17/20
25/25 - 3s - loss: 0.4632 - accuracy: 0.8600 - val_loss: 0.3026 - val_accuracy: 0.8500
Epoch 18/20
25/25 - 3s - loss: 0.1978 - accuracy: 0.9300 - val_loss: 0.2208 - val_accuracy: 0.8500
Epoch 19/20
25/25 - 3s - loss: 0.1680 - accuracy: 0.9400 - val_loss: 0.6753 - val_accuracy: 0.8500
Epoch 20/20
25/25 - 3s - loss: 0.2450 - accuracy: 0.9300 - val_loss: 0.0911 - val_accuracy: 1.0000





&lt;tensorflow.python.keras.callbacks.History at 0x7f85e418ebe0&gt;
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># See summary of model</span>
model<span style="color:#f92672">.</span>summary()
</code></pre></div><pre><code>Model: &quot;sequential&quot;
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
conv2d (Conv2D)              (None, 148, 148, 32)      896       
_________________________________________________________________
max_pooling2d (MaxPooling2D) (None, 74, 74, 32)        0         
_________________________________________________________________
max_pooling2d_1 (MaxPooling2 (None, 37, 37, 32)        0         
_________________________________________________________________
conv2d_2 (Conv2D)            (None, 35, 35, 64)        18496     
_________________________________________________________________
max_pooling2d_2 (MaxPooling2 (None, 17, 17, 64)        0         
_________________________________________________________________
conv2d_3 (Conv2D)            (None, 15, 15, 64)        36928     
_________________________________________________________________
max_pooling2d_3 (MaxPooling2 (None, 7, 7, 64)          0         
_________________________________________________________________
flatten (Flatten)            (None, 3136)              0         
_________________________________________________________________
dense (Dense)                (None, 128)               401536    
_________________________________________________________________
dense_1 (Dense)              (None, 3)                 387       
=================================================================
Total params: 458,243
Trainable params: 458,243
Non-trainable params: 0
_________________________________________________________________
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Make definition for check the result</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">check_result</span>(result):
  <span style="color:#66d9ef">if</span> result <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;sciccors&#39;</span>
  <span style="color:#66d9ef">elif</span> result <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;rock&#39;</span>
  <span style="color:#66d9ef">elif</span> result <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>:
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;paper&#39;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Make function for upload file and do prediction</span>
uploaded <span style="color:#f92672">=</span> files<span style="color:#f92672">.</span>upload()
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">check_uploaded_image</span>():
  <span style="color:#66d9ef">for</span> fn <span style="color:#f92672">in</span> uploaded<span style="color:#f92672">.</span>keys():
    img <span style="color:#f92672">=</span> image<span style="color:#f92672">.</span>load_img(fn, target_size<span style="color:#f92672">=</span>(<span style="color:#ae81ff">150</span>,<span style="color:#ae81ff">150</span>))
    imgplot <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>imshow(img)
    x <span style="color:#f92672">=</span> image<span style="color:#f92672">.</span>img_to_array(img)
    x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>expand_dims(x, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
    images <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>vstack([x])
    result <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>predict_classes(images)[<span style="color:#ae81ff">0</span>]
    <span style="color:#66d9ef">print</span>(check_result(int(result)))
check_uploaded_image()
</code></pre></div><h2 id="hasil">Hasil</h2>
<p><img src="https://i.ibb.co/nRKMZNZ/Annotation-2020-06-20-145407.jpg" alt="result"></p>
</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://chimemoo.github.io/tags/python">Python</a></li>
      <li><a href="https://chimemoo.github.io/tags/submission">Submission</a></li>
      <li><a href="https://chimemoo.github.io/tags/dicoding">Dicoding</a></li>
    </ul>
  </footer>
  <br>
  
  <div id="disqus_thread"></div>
  <script>
    var disqus_shortname = 'chimemoo';
    (function() {
      var d = document, s = d.createElement('script');
      s.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
  
</article></main>
<footer class="footer">
  <span>&copy; 2020 <a href="https://chimemoo.github.io/">Chimemoo</a></span>
  <span>&middot;</span>
  <span>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</span>
  <span>&middot;</span>
  <span>Theme️ <a href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank">Paper</a></span>
</footer>
<script src="https://chimemoo.github.io/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>
</body>
</html>

